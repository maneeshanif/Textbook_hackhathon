# Research: Docusaurus Book Site

**Feature**: 001-docusaurus-book  
**Date**: 2025-12-06  
**Source**: Context7 - `/facebook/docusaurus`

## Research Topics Resolved

### 1. i18n Configuration for RTL Languages (Urdu)

**Decision**: Use Docusaurus built-in i18n with `direction: 'rtl'` for Urdu locale

**Rationale**: Docusaurus 3.x has native support for RTL languages via `localeConfigs`. No additional plugins needed.

**Configuration**:
```javascript
export default {
  i18n: {
    defaultLocale: 'en',
    locales: ['en', 'ur'],
    path: 'i18n',
    localeConfigs: {
      en: {
        label: 'English',
        direction: 'ltr',
        htmlLang: 'en-US',
      },
      ur: {
        label: 'اردو',
        direction: 'rtl',
        htmlLang: 'ur-PK',
      },
    },
  },
};
```

**Alternatives Considered**:
- Manual RTL CSS handling → Rejected: Docusaurus handles this automatically
- Third-party i18n libraries → Rejected: Native support is sufficient

---

### 2. Sidebar Auto-Generation with X.Y.Z Chapter Structure

**Decision**: Use autogenerated sidebar with `_category_.json` metadata files

**Rationale**: Docusaurus can auto-generate sidebar from folder structure. Category metadata files control ordering and labels, allowing X.Y.Z numbering.

**Configuration** (`sidebars.js`):
```javascript
export default {
  bookSidebar: [
    {
      type: 'autogenerated',
      dirName: '.', // Generate from docs folder
    },
  ],
};
```

**Category Metadata** (`docs/01-introduction/_category_.json`):
```json
{
  "position": 1,
  "label": "Chapter 1: Introduction to Physical AI",
  "collapsible": true,
  "collapsed": false,
  "link": {
    "type": "generated-index",
    "title": "Chapter 1 Overview"
  }
}
```

**Doc Frontmatter** (for ordering within category):
```yaml
---
title: "1.0 Chapter Overview"
sidebar_position: 0
tags: [physical-ai, introduction]
difficulty: beginner
estimated_time: "10 minutes"
---
```

**Alternatives Considered**:
- Manual sidebar configuration → Rejected: High maintenance for ~20 pages
- Numbered file prefixes only → Rejected: Less control over labels

---

### 3. Custom MDX Components Pattern

**Decision**: Create swizzled MDXComponents with global registration

**Rationale**: Docusaurus allows global MDX component registration via `@theme/MDXComponents` swizzling. Components are available in all MDX files without imports.

**Implementation**:

1. Create component (`src/components/DifficultyBadge/index.tsx`):
```tsx
import React from 'react';
import styles from './styles.module.css';

type DifficultyLevel = 'beginner' | 'intermediate' | 'advanced';

interface Props {
  level: DifficultyLevel;
}

const colors = {
  beginner: '#25c2a0',      // Green
  intermediate: '#1877F2',  // Blue
  advanced: '#fa383e',      // Red
};

export default function DifficultyBadge({ level }: Props) {
  return (
    <span
      className={styles.badge}
      style={{ backgroundColor: colors[level] }}
      aria-label={`Difficulty: ${level}`}
    >
      {level}
    </span>
  );
}
```

2. Register globally (`src/theme/MDXComponents.tsx`):
```tsx
import React from 'react';
import MDXComponents from '@theme-original/MDXComponents';
import DifficultyBadge from '@site/src/components/DifficultyBadge';
import ChatbotPlaceholder from '@site/src/components/ChatbotPlaceholder';

export default {
  ...MDXComponents,
  DifficultyBadge,
  ChatbotPlaceholder,
};
```

3. Use in any MDX without imports:
```mdx
<DifficultyBadge level="beginner" />
```

**Alternatives Considered**:
- Per-file imports → Rejected: Repetitive for frequently used components
- Plugin approach → Rejected: Over-engineering for simple components

---

### 4. Dark/Light Theme with Persistence

**Decision**: Use Docusaurus built-in color mode with localStorage persistence

**Rationale**: Docusaurus classic theme includes dark/light mode toggle with automatic persistence. No custom implementation needed.

**Configuration** (`docusaurus.config.js`):
```javascript
export default {
  themeConfig: {
    colorMode: {
      defaultMode: 'light',
      disableSwitch: false,
      respectPrefersColorScheme: true, // Respect OS preference
    },
    navbar: {
      items: [
        // Color mode toggle is automatic with classic theme
      ],
    },
  },
};
```

**Alternatives Considered**:
- Custom theme toggle → Rejected: Unnecessary duplication
- CSS-only approach → Rejected: Loses persistence feature

---

### 5. Locale Dropdown in Navbar

**Decision**: Add `localeDropdown` navbar item

**Rationale**: Built-in Docusaurus navbar item type for language switching.

**Configuration**:
```javascript
export default {
  themeConfig: {
    navbar: {
      items: [
        {
          type: 'localeDropdown',
          position: 'right',
        },
      ],
    },
  },
};
```

---

### 6. Prism Syntax Highlighting

**Decision**: Use GitHub theme for light mode, Dracula for dark mode

**Rationale**: Popular, readable themes with good contrast.

**Configuration**:
```javascript
import {themes as prismThemes} from 'prism-react-renderer';

export default {
  themeConfig: {
    prism: {
      theme: prismThemes.github,
      darkTheme: prismThemes.dracula,
      defaultLanguage: 'python',
      additionalLanguages: ['bash', 'json', 'yaml'],
    },
  },
};
```

---

## Technical Stack Summary

| Component | Choice | Version |
|-----------|--------|---------|
| Framework | Docusaurus | 3.x |
| UI Library | React | 18.x |
| Content Format | MDX | 3.x |
| Styling | CSS Modules | - |
| Syntax Highlighting | Prism React Renderer | - |
| i18n | Native Docusaurus | - |
| Theme | @docusaurus/preset-classic | 3.x |

## File Structure Convention

```
docs/
├── 01-introduction/
│   ├── _category_.json       # Chapter metadata
│   ├── 1.0-overview.mdx      # Chapter overview
│   ├── 1.1-what-is-physical-ai.mdx
│   ├── 1.2-history.mdx
│   ├── 1.3-exercises.mdx
│   └── 1.4-summary.mdx
├── 02-humanoid-robotics/
│   ├── _category_.json
│   └── ...
```

## Translation Workflow

1. Run `npm run write-translations -- --locale ur` to generate translation files
2. Translate `i18n/ur/docusaurus-theme-classic/*.json` for UI strings
3. Copy and translate MDX files to `i18n/ur/docusaurus-plugin-content-docs/current/`

## References

- [Docusaurus i18n Tutorial](https://docusaurus.io/docs/i18n/tutorial)
- [Docusaurus Sidebar Autogeneration](https://docusaurus.io/docs/sidebar/autogenerated)
- [MDX and React Components](https://docusaurus.io/docs/markdown-features/react)
- [Theme Configuration](https://docusaurus.io/docs/api/themes/configuration)
